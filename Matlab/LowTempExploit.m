clear all
clc
close all

IGain=1e-6;
VGain=20/5000;
fichier=fopen('/home/Data/Aalto_Project/Mesures/LowTempMeas/50mKProper/HJ50mK_1.TXT');
if fichier==-1
    error('Le nom de fichier spécifié est incorrect')
    break 
end

A=zeros(4,500);

A=fscanf(fichier,'%f',size(A));
A(3,:)=VGain.*A(3,:);
A(4,:)=IGain.*A(4,:);
%R2 = A(1,1)*1e8;
%Temp = (20.3+1.21e6*R2.^-1+1.15e9*R2.^-2+3.61e12*R2.^-3)./1000;
Temp =A(1,1);
fun= @(x) 0.000125.*x+2.2e-8;   
Temperature=strcat('Temperature = ',num2str(Temp),' K'); 


figure(1)
hold on
plot(A(3,:).*1e3,A(4,:).*1e9);
%fplot(fun,[-6e-4 4e-4]);
xlabel('Voltage (mV)');
ylabel('Current (nA)');
title('50mK IV, test 16 1,5µm²');
legend(Temperature);

fclose(fichier);